/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn how to create Gradle builds at https://guides.gradle.org/creating-new-gradle-builds/
 */
apply plugin: 'groovy'

apply plugin: 'maven'


dependencies {

    compile gradleApi()

//    compile localGroovy()
}

repositories {
    mavenCentral()
}

group = 'com.gooker.plugin'

version = '0.2.1'

uploadArchives {
    repositories {
        mavenDeployer {
//            repository(url: uri('../repo'))

            def repoUrl = 'http://172.16.254.3:8081/repository/Android-Dev/'
            repository(url: uri(repoUrl)) {
                Properties properties = new Properties()
                properties.load(project.rootProject.file('maven_user.properties').newDataInputStream())

                def userName = properties.getProperty("repository.user")
                def userPassword = properties.getProperty("repository.password")

                authentication(userName: userName, password: userPassword)
            }

            pom.project {
                name "uploader"
                description "FileUploader"
                url repoUrl
                groupId "com.gooker.plugin"
                artifactId "uploader"
                version "0.2.2"
                packaging "com.gooker"
            }
        }
    }
}
